"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HttpClient = void 0;
const axios_1 = require("axios");
class HttpClient {
    constructor(baseUrl) {
        this.baseUrl = baseUrl;
        this.axiosInstance = axios_1.default.create({
            baseURL: baseUrl,
            headers: {
                'Content-Type': 'application/json',
            },
        });
    }
    async get(url) {
        try {
            const requestConfig = { signal: this.newAbortSignal(5000) };
            const response = await this.axiosInstance.get(url, requestConfig);
            return {
                status: response.status,
                data: response.data
            };
        }
        catch (error) {
            const axiosError = error;
            return {
                status: axiosError.response?.status,
                data: axiosError.response?.data,
                error: {
                    code: axiosError.code,
                    message: axiosError.message,
                    url: axiosError.config?.url,
                    stack: axiosError.stack
                }
            };
        }
    }
    async post(url, data) {
        try {
            const requestConfig = { signal: this.newAbortSignal(5000) };
            const response = await this.axiosInstance.post(url, data, requestConfig);
            return {
                status: response.status,
                data: response.data
            };
        }
        catch (error) {
            const axiosError = error;
            return {
                status: axiosError.response?.status,
                data: axiosError.response?.data,
                error: {
                    code: axiosError.code,
                    message: axiosError.message,
                    url: axiosError.config?.url,
                    stack: axiosError.stack
                }
            };
        }
    }
    newAbortSignal(timeoutMs) {
        const abortController = new AbortController();
        setTimeout(() => abortController.abort(), timeoutMs || 0);
        return abortController.signal;
    }
}
exports.HttpClient = HttpClient;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaHR0cC5jbGllbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zb2Z0d2FyZS9zaGFyZWQvc3JjL2NsaWVudHMvaHR0cC5jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsaUNBQTRGO0FBSTVGLE1BQWEsVUFBVTtJQUduQixZQUFzQixPQUFlO1FBQWYsWUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUVqQyxJQUFJLENBQUMsYUFBYSxHQUFHLGVBQUssQ0FBQyxNQUFNLENBQUM7WUFDOUIsT0FBTyxFQUFFLE9BQU87WUFDaEIsT0FBTyxFQUFFO2dCQUNMLGNBQWMsRUFBRSxrQkFBa0I7YUFDckM7U0FDSixDQUFDLENBQUM7SUFDUCxDQUFDO0lBR0QsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFXO1FBRWpCLElBQUksQ0FBQztZQUVELE1BQU0sYUFBYSxHQUFHLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUU1RCxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFTLEdBQUcsRUFBRSxhQUFhLENBQUMsQ0FBQztZQUUxRSxPQUFPO2dCQUNILE1BQU0sRUFBRSxRQUFRLENBQUMsTUFBTTtnQkFDdkIsSUFBSSxFQUFFLFFBQVEsQ0FBQyxJQUFjO2FBQ2hCLENBQUM7UUFFdEIsQ0FBQztRQUFDLE9BQU8sS0FBVSxFQUFFLENBQUM7WUFFbEIsTUFBTSxVQUFVLEdBQUcsS0FBbUIsQ0FBQztZQUN2QyxPQUFPO2dCQUNILE1BQU0sRUFBRSxVQUFVLENBQUMsUUFBUSxFQUFFLE1BQU07Z0JBQ25DLElBQUksRUFBRSxVQUFVLENBQUMsUUFBUSxFQUFFLElBQWM7Z0JBQ3pDLEtBQUssRUFBRTtvQkFDSCxJQUFJLEVBQUUsVUFBVSxDQUFDLElBQUk7b0JBQ3JCLE9BQU8sRUFBRSxVQUFVLENBQUMsT0FBTztvQkFDM0IsR0FBRyxFQUFFLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRztvQkFDM0IsS0FBSyxFQUFFLFVBQVUsQ0FBQyxLQUFLO2lCQUMxQjthQUNZLENBQUM7UUFHdEIsQ0FBQztJQUNMLENBQUM7SUFFRCxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQVcsRUFBRSxJQUFTO1FBRTdCLElBQUksQ0FBQztZQUVELE1BQU0sYUFBYSxHQUFHLEVBQUUsTUFBTSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztZQUU1RCxNQUFNLFFBQVEsR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFTLEdBQUcsRUFBRSxJQUFJLEVBQUUsYUFBYSxDQUFDLENBQUM7WUFFakYsT0FBTztnQkFDSCxNQUFNLEVBQUUsUUFBUSxDQUFDLE1BQU07Z0JBQ3ZCLElBQUksRUFBRSxRQUFRLENBQUMsSUFBYzthQUNoQixDQUFDO1FBRXRCLENBQUM7UUFBQyxPQUFPLEtBQVUsRUFBRSxDQUFDO1lBRWxCLE1BQU0sVUFBVSxHQUFHLEtBQW1CLENBQUM7WUFFdkMsT0FBTztnQkFDSCxNQUFNLEVBQUUsVUFBVSxDQUFDLFFBQVEsRUFBRSxNQUFNO2dCQUNuQyxJQUFJLEVBQUUsVUFBVSxDQUFDLFFBQVEsRUFBRSxJQUFjO2dCQUN6QyxLQUFLLEVBQUU7b0JBQ0gsSUFBSSxFQUFFLFVBQVUsQ0FBQyxJQUFJO29CQUNyQixPQUFPLEVBQUUsVUFBVSxDQUFDLE9BQU87b0JBQzNCLEdBQUcsRUFBRSxVQUFVLENBQUMsTUFBTSxFQUFFLEdBQUc7b0JBQzNCLEtBQUssRUFBRSxVQUFVLENBQUMsS0FBSztpQkFDMUI7YUFDWSxDQUFDO1FBRXRCLENBQUM7SUFDTixDQUFDO0lBRVEsY0FBYyxDQUFDLFNBQWlCO1FBQ3BDLE1BQU0sZUFBZSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUM7UUFDOUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLGVBQWUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxTQUFTLElBQUksQ0FBQyxDQUFDLENBQUM7UUFFMUQsT0FBTyxlQUFlLENBQUMsTUFBTSxDQUFDO0lBQ2hDLENBQUM7Q0FDTjtBQWxGRCxnQ0FrRkMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYXhpb3MsIHsgQXhpb3NFcnJvciwgQXhpb3NJbnN0YW5jZSwgQXhpb3NSZXF1ZXN0Q29uZmlnLCBBeGlvc1Jlc3BvbnNlIH0gZnJvbSAnYXhpb3MnO1xyXG5cclxuaW1wb3J0IHsgSHR0cFJlc3BvbnNlIH0gZnJvbSAnLi4vbW9kZWxzL2h0dHAtcmVzcG9uc2UubW9kZWwnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEh0dHBDbGllbnQge1xyXG4gICAgcHJpdmF0ZSBheGlvc0luc3RhbmNlOiBBeGlvc0luc3RhbmNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBiYXNlVXJsOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgdGhpcy5heGlvc0luc3RhbmNlID0gYXhpb3MuY3JlYXRlKHtcclxuICAgICAgICAgICAgYmFzZVVSTDogYmFzZVVybCwgICAgICAgICAgICBcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgYXN5bmMgZ2V0KHVybDogc3RyaW5nKTogUHJvbWlzZTxIdHRwUmVzcG9uc2U+IHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RDb25maWcgPSB7IHNpZ25hbDogdGhpcy5uZXdBYm9ydFNpZ25hbCg1MDAwKSB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UuZ2V0PE9iamVjdD4odXJsLCByZXF1ZXN0Q29uZmlnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHJlc3BvbnNlLmRhdGEgYXMgT2JqZWN0XHJcbiAgICAgICAgICAgIH0gYXMgSHR0cFJlc3BvbnNlO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBheGlvc0Vycm9yID0gZXJyb3IgYXMgQXhpb3NFcnJvcjtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN0YXR1czogYXhpb3NFcnJvci5yZXNwb25zZT8uc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogYXhpb3NFcnJvci5yZXNwb25zZT8uZGF0YSBhcyBPYmplY3QsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IGF4aW9zRXJyb3IuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBheGlvc0Vycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBheGlvc0Vycm9yLmNvbmZpZz8udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrOiBheGlvc0Vycm9yLnN0YWNrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gYXMgSHR0cFJlc3BvbnNlOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgcG9zdCh1cmw6IHN0cmluZywgZGF0YTogYW55KTogUHJvbWlzZTxIdHRwUmVzcG9uc2U+IHtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RDb25maWcgPSB7IHNpZ25hbDogdGhpcy5uZXdBYm9ydFNpZ25hbCg1MDAwKSB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmF4aW9zSW5zdGFuY2UucG9zdDxPYmplY3Q+KHVybCwgZGF0YSwgcmVxdWVzdENvbmZpZyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiByZXNwb25zZS5kYXRhIGFzIE9iamVjdFxyXG4gICAgICAgICAgICB9IGFzIEh0dHBSZXNwb25zZTtcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgYXhpb3NFcnJvciA9IGVycm9yIGFzIEF4aW9zRXJyb3I7ICAgICAgXHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBheGlvc0Vycm9yLnJlc3BvbnNlPy5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBheGlvc0Vycm9yLnJlc3BvbnNlPy5kYXRhIGFzIE9iamVjdCxcclxuICAgICAgICAgICAgICAgIGVycm9yOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogYXhpb3NFcnJvci5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGF4aW9zRXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGF4aW9zRXJyb3IuY29uZmlnPy51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhY2s6IGF4aW9zRXJyb3Iuc3RhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBhcyBIdHRwUmVzcG9uc2U7ICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcbiAgIH1cclxuXHJcbiAgICBwcml2YXRlIG5ld0Fib3J0U2lnbmFsKHRpbWVvdXRNczogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gYWJvcnRDb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXRNcyB8fCAwKTtcclxuICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGFib3J0Q29udHJvbGxlci5zaWduYWw7XHJcbiAgICAgIH1cclxufSJdfQ==